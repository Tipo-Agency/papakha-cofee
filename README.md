# Papakha Coffee Frontend

Фронтенд приложения для кофейни Papakha Coffee с интеграцией API.

## Структура проекта

```
frontend/
├── app/                    # Next.js App Router
│   ├── page.tsx           # Главная страница
│   ├── layout.tsx         # Корневой layout
│   └── globals.css        # Глобальные стили
├── components/             # React компоненты
│   ├── ui/                # UI компоненты (shadcn/ui)
│   │   ├── lazy-image.tsx # Компонент ленивой загрузки изображений
│   │   ├── image-placeholder.tsx # Компонент placeholder'а изображения
│   │   └── image-preloader.tsx # Компонент предзагрузки изображений
│   ├── virtual-dishes-list.tsx # Виртуализированный список блюд
│   └── restaurant-menu.tsx # Компонент меню ресторана
├── hooks/                  # React хуки
│   ├── use-menu.ts        # Хук для работы с полным меню (основной)
│   ├── use-lazy-images.ts # Хук для ленивой загрузки изображений
│   ├── use-virtual-list.ts # Хук для виртуализации списков
│   ├── use-categories.ts  # Хук для работы с категориями (legacy)
│   └── use-products.ts    # Хук для работы с продуктами (legacy)
├── lib/                    # Утилиты и конфигурация
│   ├── api.ts             # API клиент и сервисы
│   ├── utils.ts           # Общие утилиты
│   └── currency.ts        # Утилиты для работы с валютой
├── types/                  # TypeScript типы
│   └── index.ts           # Основные типы приложения
└── public/                 # Статические файлы
    ├── images/            # Изображения
    └── fonts/             # Шрифты
```

## Архитектура

### API Layer (`lib/api.ts`)
- Централизованный API клиент
- Типизированные ответы
- Обработка ошибок
- Поддержка языков

### Hooks Layer (`hooks/`)
- `useMenu` - управление полным меню (основной)
- `useLazyImages` - ленивая загрузка изображений с Intersection Observer
- `useVirtualList` - виртуализация списков для оптимизации рендеринга
- `useCategories` - управление категориями (legacy)
- `useProducts` - управление продуктами (legacy)
- Автоматическая загрузка данных
- Обработка состояний загрузки и ошибок

### Types Layer (`types/`)
- Централизованные TypeScript типы
- Интерфейсы для API ответов
- Типы для состояния приложения

### Utils Layer (`lib/utils.ts`)
- Вспомогательные функции
- Генерация ID секций
- Утилиты для стилизации

## API Endpoints

### Базовый URL
```
https://api.papakhacoffee.uz/api/v1/frontend
```

### Меню
- `GET /menu` - получение полного меню с иерархической структурой
- Поддержка языков через заголовок `Accept-Language`

### Категории (Legacy)
- `GET /categories` - получение списка категорий
- Поддержка языков через заголовок `Accept-Language`

### Продукты (Legacy)
- `GET /categories/{categoryId}/products` - продукты по категории
- `GET /products/search?q={query}` - поиск продуктов

## Поддерживаемые языки

- `ru` - Русский (по умолчанию)
- `uz` - Узбекский  
- `en` - Английский

## Особенности

- ✅ Чистая архитектура с разделением ответственности
- ✅ TypeScript для типобезопасности
- ✅ React хуки для управления состоянием
- ✅ Автоматическая загрузка данных
- ✅ Обработка ошибок и состояний загрузки
- ✅ Поддержка мультиязычности
- ✅ Responsive дизайн
- ✅ Доступность (accessibility)
- ✅ Автоматическое формирование URL изображений
- ✅ Fallback изображения для недоступных фото
- ✅ Ленивая загрузка изображений (Lazy Loading)
- ✅ Кэширование изображений для мгновенного отображения
- ✅ Предзагрузка изображений для улучшения UX
- ✅ Виртуализация списков для больших объемов данных
- ✅ Прогрессивная загрузка изображений
- ✅ Оптимизация качества изображений
- ✅ Мультиязычная поддержка валют (сум/so'm/sum)
- ✅ Умная смена языка без перезагрузки данных

## Разработка

### Установка зависимостей
```bash
npm install
# или
pnpm install
```

### Запуск в режиме разработки
```bash
npm run dev
# или
pnpm dev
```

### Сборка для продакшена
```bash
npm run build
# или
pnpm build
```

## Планы развития

- [x] Загрузка полного меню с иерархической структурой
- [x] Поиск по блюдам
- [x] Модальные окна с деталями блюд
- [ ] Корзина покупок
- [ ] Административная панель
- [ ] PWA функциональность
